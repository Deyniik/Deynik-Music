<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Deynik Music | Mayhem</title>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

        :root {
            --bg-black: #000000;
            --panel-bg: #0f0f0f;
            --card-inner: #141414;
            --text-gray: #7a7a7a;
            --spotify-green: #1ed760;
            --logo-brown: #5c4033;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; }
        body { background: var(--bg-black); color: white; font-family: 'Inter', sans-serif; height: 100vh; display: flex; flex-direction: column; overflow: hidden; font-size: 16px; }

        /* Шапка */
        .top-nav { height: 65px; display: flex; align-items: center; padding: 0 20px; }
        .logo-area { width: 380px; display: flex; align-items: center; gap: 12px; cursor: pointer; flex-shrink: 0; }
        .logo-area h1 { font-size: 26px; font-weight: 900; letter-spacing: -1.5px; }
        .search-container { flex: 1; display: flex; justify-content: center; }
        .search-input { width: 400px; height: 40px; background: #1a1a1a; border-radius: 20px; border: none; color: white; text-align: center; font-size: 14px; opacity: 0.6; transition: 0.3s; }
        .search-input:focus { opacity: 1; background: #222; }

        /* Сетка приложения */
        .app-main { flex: 1; display: flex; gap: 10px; padding: 0 10px 10px; overflow: hidden; }
        .panel { background: var(--panel-bg); border-radius: 12px; padding: 20px; display: flex; flex-direction: column; }
        .side { width: 380px; flex-shrink: 0; } 
        .center { flex: 1; overflow-y: auto; scrollbar-width: none; }

        /* Навигация альбома */
        .album-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; }
        .album-card { background: var(--card-inner); padding: 15px; border-radius: 10px; cursor: pointer; position: relative; transition: 0.3s; }
        .album-card:hover { background: #1d1d1d; }
        .play-badge { position: absolute; right: 20px; bottom: 70px; width: 48px; height: 48px; background: var(--spotify-green); border-radius: 50%; display: flex; align-items: center; justify-content: center; opacity: 0; transform: translateY(10px); transition: 0.3s; box-shadow: 0 8px 15px rgba(0,0,0,0.4); }
        .album-card:hover .play-badge { opacity: 1; transform: translateY(0); }

        /* Плеер (уменьшен) */
        .player-bar { height: 85px; background: black; display: grid; grid-template-columns: 350px 1fr 350px; align-items: center; padding: 0 25px; border-top: 1px solid #121212; }
        .p-btn { width: 38px; height: 38px; background: #1a1a1a; border-radius: 8px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: 0.2s; }
        .p-btn:hover { background: #252525; transform: scale(1.05); }

        /* Табы справа */
        .right-tabs { display: flex; gap: 20px; margin-bottom: 20px; border-bottom: 1px solid #1a1a1a; }
        .tab-link { color: var(--text-gray); font-size: 12px; font-weight: 700; text-transform: uppercase; padding-bottom: 10px; cursor: pointer; border-bottom: 2px solid transparent; }
        .tab-link.active { color: white; border-color: white; }

        .track-row { display: grid; grid-template-columns: 35px 1fr 60px; padding: 10px; border-radius: 8px; cursor: pointer; transition: 0.2s; align-items: center; }
        .track-row:hover { background: #1a1a1a; }

        .hidden { display: none; }
        .scroll-hide::-webkit-scrollbar { display: none; }
    </style>
</head>
<body>

    <header class="top-nav">
        <div class="logo-area" onclick="goHome()">
            <h1>Deynik Music</h1>
            <svg width="30" height="30" viewBox="0 0 100 100">
                <polygon points="10,10 80,50 10,90" fill="var(--logo-brown)"/>
                <path d="M60,30 Q85,50 60,70 M75,15 Q110,50 75,85" stroke="var(--logo-brown)" fill="none" stroke-width="8" stroke-linecap="round"/>
            </svg>
        </div>
        <div class="search-container">
            <input type="text" class="search-input" placeholder="Поиск треков или исполнителей">
        </div>
        <div style="width: 380px;"></div>
    </header>

    <div class="app-main">
        <aside class="panel side">
            <div style="display:flex; align-items:center; gap:15px; margin-bottom:25px; color:var(--text-gray)">
                <i data-lucide="library"></i> <b>Моя медиатека</b>
            </div>
            <div class="side-item" onclick="goHome()" style="cursor:pointer; margin-bottom:15px;">
                <i data-lucide="home"></i> <span style="margin-left:12px">Главная</span>
            </div>
        </aside>

        <main class="panel center scroll-hide">
            <div id="view-home">
                <div style="height:260px; border-radius:12px; background: linear-gradient(135deg, #4b3621, #000); display:flex; flex-direction:column; justify-content:center; align-items:center; margin-bottom:30px;">
                    <h1 style="font-size:55px; font-weight:800; margin-bottom:15px;">Мой Vibe</h1>
                    <div class="p-btn" style="width:65px; height:65px; background:var(--spotify-green); border-radius:50%;" onclick="toggleVibe()">
                        <i id="vibe-icon" data-lucide="play" fill="black" color="black" size="30" style="margin-left:4px"></i>
                    </div>
                </div>

                <h2 style="margin-bottom:20px;">Альбомы на сегодня</h2>
                <div class="album-grid">
                    <div class="album-card" onclick="openAlbum()">
                        <img src="https://s3.k-connect.ru/static/music/1475/5955/1770656744_cover.jpeg" style="width:100%; border-radius:8px; margin-bottom:12px;">
                        <b style="font-size:15px;">Mayhem</b><br>
                        <small style="color:var(--text-gray)">Lady Gaga • 2025</small>
                        <div class="play-badge" onclick="event.stopPropagation(); playAlbum();">
                            <i data-lucide="play" fill="black" color="black"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div id="view-album" class="hidden">
                <div style="display:flex; gap:30px; align-items:flex-end; margin-bottom:40px;">
                    <img src="https://s3.k-connect.ru/static/music/1475/5955/1770656744_cover.jpeg" style="width:230px; border-radius:10px; box-shadow: 0 20px 50px rgba(0,0,0,0.5);">
                    <div>
                        <small style="font-weight:800; color:var(--text-gray)">АЛЬБОМ</small>
                        <h1 style="font-size:70px; font-weight:900; margin:10px 0;">Mayhem</h1>
                        <p>Lady Gaga • 2025 • 14 песен</p>
                    </div>
                </div>
                <div id="album-list"></div>
            </div>
        </main>

        <aside class="panel side">
            <div class="right-tabs">
                <div id="t-queue" class="tab-link active" onclick="switchRight('queue')">Далее</div>
                <div id="t-wiki" class="tab-link" onclick="switchRight('wiki')">О треке</div>
            </div>
            
            <div id="panel-queue" class="scroll-hide" style="overflow-y:auto;"></div>
            
            <div id="panel-wiki" class="hidden">
                <img id="wiki-cover" src="" style="width:100%; border-radius:8px; margin-bottom:20px;">
                <h3 id="wiki-title" style="margin-bottom:10px;"></h3>
                <p id="wiki-text" style="color:var(--text-gray); font-size:14px; line-height:1.6;"></p>
            </div>
        </aside>
    </div>

    <footer class="player-bar">
        <div style="display:flex; align-items:center; gap:15px;">
            <img id="p-img" src="" style="width:58px; height:58px; border-radius:4px; background:#1a1a1a;">
            <div>
                <b id="p-title" style="font-size:14px; display:block;">Выберите трек</b>
                <span id="p-artist" style="color:var(--text-gray); font-size:12px;">Lady Gaga</span>
            </div>
        </div>

        <div style="display:flex; flex-direction:column; align-items:center; gap:8px;">
            <div style="display:flex; align-items:center; gap:20px;">
                <div class="p-btn" onclick="prevTrack()"><i data-lucide="skip-back" fill="white" size="18"></i></div>
                <div class="p-btn" style="background:white; color:black;" onclick="togglePlay()">
                    <i id="main-play-btn" data-lucide="play" fill="black" size="22" style="margin-left:2px"></i>
                </div>
                <div class="p-btn" onclick="nextTrack()"><i data-lucide="skip-forward" fill="white" size="18"></i></div>
            </div>
            <div style="display:flex; align-items:center; gap:12px; width:100%; max-width:550px;">
                <span id="c-time" style="font-size:11px; color:var(--text-gray); width:35px;">0:00</span>
                <div style="flex:1; height:4px; background:#333; border-radius:2px; cursor:pointer;" onclick="seek(event)">
                    <div id="p-fill" style="height:100%; background:white; width:0%; border-radius:2px;"></div>
                </div>
                <span id="d-time" style="font-size:11px; color:var(--text-gray); width:35px;">0:00</span>
            </div>
        </div>

        <div style="display:flex; justify-content:flex-end;">
            <div style="display:flex; align-items:center; gap:10px;">
                <i data-lucide="volume-2" size="18" color="var(--text-gray)"></i>
                <div style="width:100px; height:4px; background:#333; border-radius:2px;">
                    <div id="v-fill" style="height:100%; background:white; width:70%;"></div>
                </div>
            </div>
        </div>
    </footer>

    <script>
        const albumCover = "https://s3.k-connect.ru/static/music/1475/5955/1770656744_cover.jpeg";
        const tracks = [
            { id: 1, title: "Disease", url: "https://s3.k-connect.ru/static/music/1475/5954/1770656682_Lady_Gaga_-_Disease.mp3", time: "3:50" },
            { id: 2, title: "Abracadabra", url: "https://s3.k-connect.ru/static/music/1475/5955/1770656744_Lady_Gaga_-_Abracadabra.mp3", time: "3:43" },
            { id: 3, title: "Garden Of Eden", url: "https://s3.k-connect.ru/static/music/1475/5956/1770656858_Lady_Gaga_-_Garden_Of_Eden.mp3", time: "3:59" },
            { id: 4, title: "Perfect Celebrity", url: "https://s3.k-connect.ru/static/music/1475/5957/1770656859_Lady_Gaga_-_Perfect_Celebrity.mp3", time: "3:49" },
            { id: 5, title: "Vanish Into You", url: "https://s3.k-connect.ru/static/music/1475/5959/1770656860_Lady_Gaga_-_Vanish_Into_You.mp3", time: "4:04" },
            { id: 6, title: "Killah (feat. Gesaffelstein)", url: "https://s3.k-connect.ru/static/music/1475/5960/1770656860_Lady_Gaga_-_Killah.mp3", time: "3:30" },
            { id: 7, title: "Zombieboy", url: "https://s3.k-connect.ru/static/music/1475/5961/1770656861_Lady_Gaga_-_Zombieboy.mp3", time: "3:33" },
            { id: 8, title: "LoveDrug", url: "https://s3.k-connect.ru/static/music/1475/5963/1770656862_Lady_Gaga_-_LoveDrug.mp3", time: "3:13" },
            { id: 9, title: "How Bad Do U Want Me", url: "https://s3.k-connect.ru/static/music/1475/5964/1770656932_Lady_Gaga_-_How_Bad_Do_U_Want_Me.mp3", time: "3:58" },
            { id: 10, title: "Don't Call Tonight", url: "https://s3.k-connect.ru/static/music/1475/5965/1770656932_Lady_Gaga_-_Don_t_Call_Tonight.mp3", time: "3:45" },
            { id: 11, title: "Shadow Of A Man", url: "https://s3.k-connect.ru/static/music/1475/5967/1770656933_Lady_Gaga_-_Shadow_Of_A_Man.mp3", time: "3:19" },
            { id: 12, title: "The Beast", url: "https://s3.k-connect.ru/static/music/1475/5968/1770656934_Lady_Gaga_-_The_Beast.mp3", time: "3:54" },
            { id: 13, title: "Blade Of Grass", url: "https://s3.k-connect.ru/static/music/1475/5969/1770656934_Lady_Gaga_-_Blade_Of_Grass.mp3", time: "4:17" },
            { id: 14, title: "Die With A Smile", url: "https://s3.k-connect.ru/static/music/1475/5970/1770656935_Lady_Gaga_-_Die_With_A_Smile.mp3", time: "4:11" }
        ];

        let currentIdx = -1;
        let isVibe = false;
        let audio = new Audio();

        function init() {
            renderAlbum();
            renderQueue();
            lucide.createIcons();
            audio.ontimeupdate = updateProgress;
            audio.onended = () => isVibe ? playRandom() : nextTrack();
        }

        function goHome() { 
            document.getElementById('view-home').classList.remove('hidden'); 
            document.getElementById('view-album').classList.add('hidden');
        }

        function openAlbum() { 
            document.getElementById('view-home').classList.add('hidden'); 
            document.getElementById('view-album').classList.remove('hidden');
        }

        function renderAlbum() {
            document.getElementById('album-list').innerHTML = tracks.map((t, i) => `
                <div class="track-row" onclick="playTrack(${i})">
                    <span style="color:var(--text-gray)">${i+1}</span>
                    <b>${t.title}</b>
                    <span style="text-align:right; color:var(--text-gray)">${t.time}</span>
                </div>
            `).join('');
        }

        function renderQueue() {
            document.getElementById('panel-queue').innerHTML = tracks.map((t, i) => `
                <div class="track-row" style="opacity:${i === currentIdx ? '1' : '0.5'}" onclick="playTrack(${i})">
                    <img src="${albumCover}" style="width:40px; border-radius:4px; margin-right:12px;">
                    <b>${t.title}</b>
                </div>
            `).join('');
        }

        function playTrack(idx) {
            currentIdx = idx;
            audio.src = tracks[idx].url;
            audio.play();
            updateUI();
            renderQueue();
            updateWiki();
        }

        function togglePlay() {
            if(currentIdx === -1) return playTrack(0);
            audio.paused ? audio.play() : audio.pause();
            updateUI();
        }

        function updateUI() {
            const t = tracks[currentIdx];
            document.getElementById('p-title').innerText = t.title;
            document.getElementById('p-img').src = albumCover;
            const icon = audio.paused ? 'play' : 'pause';
            document.getElementById('main-play-btn').setAttribute('data-lucide', icon);
            lucide.createIcons();
        }

        function nextTrack() { playTrack((currentIdx + 1) % tracks.length); }
        function prevTrack() { playTrack((currentIdx - 1 + tracks.length) % tracks.length); }

        function toggleVibe() {
            isVibe = !isVibe;
            document.getElementById('vibe-icon').setAttribute('data-lucide', isVibe ? 'pause' : 'play');
            if(isVibe && audio.paused) playRandom();
            lucide.createIcons();
        }

        function playRandom() { playTrack(Math.floor(Math.random() * tracks.length)); }

        function switchRight(type) {
            document.getElementById('panel-queue').classList.toggle('hidden', type !== 'queue');
            document.getElementById('panel-wiki').classList.toggle('hidden', type !== 'wiki');
            document.getElementById('t-queue').classList.toggle('active', type === 'queue');
            document.getElementById('t-wiki').classList.toggle('active', type === 'wiki');
        }

        function updateWiki() {
            const t = tracks[currentIdx];
            document.getElementById('wiki-cover').src = albumCover;
            document.getElementById('wiki-title').innerText = t.title;
            document.getElementById('wiki-text').innerText = `Песня "${t.title}" является частью альбома Mayhem (2025). Lady Gaga вернулась к своим истокам, объединив мощный вокал с электронным звучанием. Трек длится ${t.time} и уже покоряет чарты.`;
        }

        function updateProgress() {
            const pct = (audio.currentTime / audio.duration) * 100 || 0;
            document.getElementById('p-fill').style.width = pct + '%';
            document.getElementById('c-time').innerText = formatTime(audio.currentTime);
            if(audio.duration) document.getElementById('d-time').innerText = formatTime(audio.duration);
        }

        function formatTime(s) {
            const m = Math.floor(s/60);
            const sec = Math.floor(s%60);
            return `${m}:${sec < 10 ? '0' : ''}${sec}`;
        }

        function seek(e) {
            const rect = e.currentTarget.getBoundingClientRect();
            audio.currentTime = ((e.clientX - rect.left) / rect.width) * audio.duration;
        }

        init();
    </script>
</body>
</html>
