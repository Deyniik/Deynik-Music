<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Deynik Music</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <header class="top-nav">
        <div class="logo-area" onclick="location.hash='#home'">
            <h1>Deynik Music</h1>
            <svg width="30" height="30" viewBox="0 0 100 100">
                <polygon points="10,10 80,50 10,90" fill="#5c4033"/>
                <path d="M60,30 Q85,50 60,70 M75,15 Q110,50 75,85" stroke="#5c4033" fill="none" stroke-width="8" stroke-linecap="round"/>
            </svg>
        </div>
        <div class="search-container">
            <input type="text" class="search-input" placeholder="Поиск треков или исполнителей">
        </div>
        <div style="width: 380px;"></div>
    </header>

    <div class="app-main">
        <aside class="panel side">
            <div class="filter-nav">
                <button class="nav-arrow" onclick="scrollFilters(-120)"><i data-lucide="chevron-left" size="18"></i></button>
                <div class="filter-scroll scroll-hide" id="filterScroll">
                    <button class="tab active" onclick="filterSide('all', this)"><i data-lucide="home" size="16"></i></button>
                    <button class="tab" onclick="filterSide('artist', this)">Исполнители</button>
                    <button class="tab" onclick="filterSide('album', this)">Альбомы</button>
                    <button class="tab" onclick="filterSide('playlist', this)">Плейлисты</button>
                    <button class="tab" onclick="filterSide('radio', this)">Радио</button>
                </div>
                <button class="nav-arrow" onclick="scrollFilters(120)"><i data-lucide="chevron-right" size="18"></i></button>
            </div>
            <div id="side-list" class="scroll-hide" style="overflow-y: auto;">
                <div class="side-item">
                    <div style="width:52px; height:52px; border-radius:6px; background: linear-gradient(135deg, #450af5, #c4efd9); display:flex; align-items:center; justify-content:center;">
                        <i data-lucide="heart" fill="white" color="white" size="24"></i>
                    </div>
                    <div style="margin-left:8px;"><b>Любимые треки</b><br><small style="color:#7a7a7a;">Плейлист • 0 треков</small></div>
                </div>
                <div id="filtered-content"></div>
                
                <!-- Закрепленные альбомы -->
                <div id="pinned-side-container" style="margin-top: 20px;"></div>
            </div>
        </aside>

        <main class="panel center scroll-hide" id="content-area"></main>

        <aside class="panel side">
            <img id="side-cover" src="" style="width:100%; border-radius:10px; margin-bottom:20px; display: none;">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <div>
                    <h2 id="side-title" style="font-size:24px; font-weight:800;">Выберите трек</h2>
                    <p id="side-artist" style="color:#7a7a7a; font-size:17px;"></p>
                </div>
                <i data-lucide="heart" id="like-side" class="like-btn" onclick="toggleLike()"></i>
            </div>
            <div style="margin-top:35px; display: flex; flex-direction: column; flex: 1; min-height: 0;">
                <p style="font-weight:700; margin-bottom:12px; font-size:12px; color:#7a7a7a; text-transform:uppercase;">Очередь</p>
                <div id="queue-list" class="scroll-hide" style="overflow-y: auto; flex: 1;"></div>
            </div>
        </aside>
    </div>

    <footer class="player-bar">
        <div style="display:flex; align-items:center; gap:15px;">
            <img id="p-img" src="" style="width:58px; height:58px; border-radius:4px; background:#1a1a1a; display:none;">
            <div>
                <b id="p-title" style="font-size:15px; display:block; font-weight:600;">Выберите трек</b>
                <span id="p-artist" style="color:#7a7a7a; font-size:13px;"></span>
            </div>
            <i data-lucide="heart" id="like-player" size="20" class="like-btn" style="margin-left:20px;" onclick="toggleLike()"></i>
        </div>

        <div style="display:flex; flex-direction:column; align-items:center; gap:8px;">
            <div style="display:flex; align-items:center; gap:20px;">
                <div class="p-btn" onclick="prevTrack()"><i data-lucide="skip-back" fill="white" size="18" style="transform: scale(0.9);"></i></div>
                <div class="p-btn" style="background:white; color:black;" onclick="togglePlay()">
                    <i id="main-play-btn" data-lucide="play" fill="black" size="22" style="margin-left:2px; transform: scale(0.9);"></i>
                </div>
                <div class="p-btn" onclick="nextTrack()"><i data-lucide="skip-forward" fill="white" size="18" style="transform: scale(0.9);"></i></div>
            </div>
            <div style="display:flex; align-items:center; gap:12px; width:100%; max-width:550px;">
                <span id="c-time" style="font-size:11px; color:#7a7a7a; width:35px;">0:00</span>
                <div class="bar-bg" onclick="seek(event)">
                    <div id="p-fill" class="bar-fill"></div>
                </div>
                <span id="d-time" style="font-size:11px; color:#7a7a7a; width:35px;">0:00</span>
            </div>
        </div>

        <div style="display:flex; justify-content:flex-end; align-items:center;">
            <div style="display:flex; align-items:center; gap:12px;" onwheel="handleVolumeWheel(event)">
                <i data-lucide="volume-2" size="18" color="#7a7a7a"></i>
                <div class="vol-slider" id="vol-slider" onmousedown="startVolDrag(event)">
                    <div id="v-fill" class="vol-fill" style="width:70%;"></div>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // ========== ГЛОБАЛЬНЫЕ ПЕРЕМЕННЫЕ ==========
        window.albumTracks = [
            {title:"Disease", url:"https://s3.k-connect.ru/static/music/1475/5954/1770656682_Lady_Gaga_-_Disease.mp3", time:"3:50"},
            {title:"Abracadabra", url:"https://s3.k-connect.ru/static/music/1475/5955/1770656744_Lady_Gaga_-_Abracadabra.mp3", time:"3:43"},
            {title:"Garden Of Eden", url:"https://s3.k-connect.ru/static/music/1475/5956/1770656858_Lady_Gaga_-_Garden_Of_Eden.mp3", time:"3:59"},
            {title:"Perfect Celebrity", url:"https://s3.k-connect.ru/static/music/1475/5957/1770656859_Lady_Gaga_-_Perfect_Celebrity.mp3", time:"3:49"},
            {title:"Can't Stop the High", url:"https://s3.k-connect.ru/static/music/1475/5958/1770656859_Lady_Gaga_-_Can_t_Stop_the_High.mp3", time:"3:32"},
            {title:"Vanish Into You", url:"https://s3.k-connect.ru/static/music/1475/5959/1770656860_Lady_Gaga_-_Vanish_Into_You.mp3", time:"4:04"},
            {title:"Killah", url:"https://s3.k-connect.ru/static/music/1475/5960/1770656860_Lady_Gaga_-_Killah.mp3", time:"3:30"},
            {title:"Zombieboy", url:"https://s3.k-connect.ru/static/music/1475/5961/1770656861_Lady_Gaga_-_Zombieboy.mp3", time:"3:33"},
            {title:"The Dead Dance", url:"https://s3.k-connect.ru/static/music/1475/5962/1770656861_Lady_Gaga_-_The_Dead_Dance.mp3", time:"3:47"},
            {title:"LoveDrug", url:"https://s3.k-connect.ru/static/music/1475/5963/1770656862_Lady_Gaga_-_LoveDrug.mp3", time:"3:13"},
            {title:"How Bad Do U Want Me", url:"https://s3.k-connect.ru/static/music/1475/5964/1770656932_Lady_Gaga_-_How_Bad_Do_U_Want_Me.mp3", time:"3:58"},
            {title:"Don't Call Tonight", url:"https://s3.k-connect.ru/static/music/1475/5965/1770656932_Lady_Gaga_-_Don_t_Call_Tonight.mp3", time:"3:45"},
            {title:"Kill For Love", url:"https://s3.k-connect.ru/static/music/1475/5966/1770656933_Lady_Gaga_-_Kill_For_Love.mp3", time:"3:38"},
            {title:"Shadow Of A Man", url:"https://s3.k-connect.ru/static/music/1475/5967/1770656933_Lady_Gaga_-_Shadow_Of_A_Man.mp3", time:"3:19"},
            {title:"The Beast", url:"https://s3.k-connect.ru/static/music/1475/5968/1770656934_Lady_Gaga_-_The_Beast.mp3", time:"3:54"},
            {title:"Blade Of Grass", url:"https://s3.k-connect.ru/static/music/1475/5969/1770656934_Lady_Gaga_-_Blade_Of_Grass.mp3", time:"4:17"},
            {title:"Die With A Smile", url:"https://s3.k-connect.ru/static/music/1475/5970/1770656935
